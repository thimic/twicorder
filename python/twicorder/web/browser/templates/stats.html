{% extends "base.html" %}

{% block scripts %}
    {{ super() }}
    <script>
    $(document).ready( function () {
        $('#stats_table').DataTable(
            {
                "pageLength": 25,
                "responsive": true,
                "order": [[ 1, "desc" ]]
            }
        );
    } );
    </script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    google.charts.load("current", {packages:["calendar"]});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var dataTable = new google.visualization.DataTable();
        dataTable.addColumn({ type: 'date', id: 'Date' });
        dataTable.addColumn({ type: 'number', id: 'Tweets' });
        dataTable.addRows([
            {{ date_count }}
        ]);

        var chart = new google.visualization.Calendar(document.getElementById('calendar_basic'));

        var options = {
            title: "Tweets per day from @slpng_giants",
            height: 350,
        };

        chart.draw(dataTable, options);
    }
    </script>
{% endblock %}

{% block app_content %}
<div class="jumbotron">
  <h1>Twicorder Stats</h1>
  <p>{{data['All Tweets']}} tweets and counting</p>
</div>
<div class="container" id="calendar_basic" style="width: 1000px; height: 350px;"></div>
<div class="container">
    <table id="stats_table" class="table table-striped">
        <thead >
            <tr>
                <td>From account</td>
                <td style="text-align: right">Count</td>
            </tr>
        </thead>
        <tbody>
            {% for key, value in data.items() %}
            <tr>
                <td>{{ key }}</td>
                <td style="text-align: right">{{ value }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
